name: Building CI on Unity for Team 1 PFE

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

env:
  PROJECT_NAME: PFE_TestCI  # D√©finir le nom du projet comme variable d'environnement

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Send Discord notification
        uses: tsickert/discord-webhook@v6.0.0
        with:
          webhook-url: ${{ secrets.WEBHOOK_URL }}
          username: "Abbuild üêíüçå"
          avatar-url: "https://media.discordapp.net/attachments/1314208057806426152/1346476105367814228/Abbu_3.png?ex=67c85317&is=67c70197&hm=c7c88ce931b72cf8e68da0792d2091a2e4b5f2e57e348f87d3ed36c5f1b792b5&=&format=webp&quality=lossless"
          embed-thumbnail-url: "https://cinefilms-planet.fr/wp-content/uploads/2015/09/abu-personnage-aladdin-04.jpg"
          embed-image-url: "https://cinefilms-planet.fr/wp-content/uploads/2015/09/abu-personnage-aladdin-04.jpg"
          embed-author-icon-url: "https://cinefilms-planet.fr/wp-content/uploads/2015/09/abu-personnage-aladdin-04.jpg"
          embed-title: "Build Unity ${{ env.STATUS }}"
          embed-description: |
            **D√©tails de la build:**
            - **Nom:** ${{ env.BUILD_NAME }}
            - **Plateforme:** StandaloneWindows64
            - **Dur√©e d'ex√©cution:** ${{ steps.build-execution-time.outputs.duration }} secondes
            - **Code de sortie:** ${{ steps.project-build.outputs.engineExitCode }}

            **Commits depuis la derni√®re build:**
            ${{ env.COMMITS }}

            **Liens Utiles:**
            - [T√©l√©charger la build](${{ env.BUILD_ARTIFACT_URL }})
            - [D√©tails du workflow](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }})
          embed-color: ${{ env.COLOR }}
          embed-footer-text: "Team 1 PFE - Build g√©n√©r√©e le ${{ env.START_TIME }}" 

